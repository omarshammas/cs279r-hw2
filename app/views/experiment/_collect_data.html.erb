	<script>
	    $(document).ready(function(){

	    	var target = '<%= @button.abr %>';
	    	var start_time;
	    	var errors;

	    	//once the page has loaded present the user with the button to begin.
	    	$('#target_icon').empty();
	    	$('#target_icon').append('<button id="target_icon_btn">Show me my next task</button>');


	    	$('#target_icon_btn').click(function () {
	    		$('#target_icon').empty();
	    		$('#target_icon').append('You are looking for <img src="/assets/normal/<%= @button.img %>"" /> - <%= @button.name %>');
	    		start_time = new Date();
	    		errors = 0;
	    	});

		    $('.ribbon-button').click(function () {
		    	record_click(this)
		    });

		    $('.cm-button').click(function() {
		    	record_click(this);
			});

			function record_click (div){
		    	//Does that title of the button pressed match the target button
		        var label = $(div).attr('id')
		        if (label && label == target) {
		        	
		    		var end_time = new Date();
		    		var time = end_time - start_time

		    		//update the form, then submit
		    		$('#task_time').val(time);
		    		$('#task_errors').val(errors);
		    		$('#task_form').submit();

		    	} else {
		    		errors += 1;

		    		//Not correct make a beep
		    		soundHandle = document.getElementById('soundHandle');
		    		soundHandle.play();
		    	}
			}
	    });
	</script>

	<audio id="soundHandle" src="http://www.soundjay.com/button/sounds/beep-2.mp3" style="display: none;"></audio>
	<%= form_tag('/task_complete', method: 'post', id: :task_form) do %>
		<%= hidden_field_tag :errors, 0, id: :task_errors %>
		<%= hidden_field_tag :time, 0, id: :task_time %>
	<% end %>